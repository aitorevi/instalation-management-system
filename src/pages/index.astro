---
import { getCurrentUser } from '@/features/auth/logic/auth';

const { user } = await getCurrentUser(Astro.cookies);

if (!user) {
  return Astro.redirect('/login');
}

const redirectUrl = user.role === 'admin' ? '/admin' : '/installer';
return Astro.redirect(redirectUrl);
---
